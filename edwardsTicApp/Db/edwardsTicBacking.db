# edwardsTicTurbo.template
# Template database for for the Edwards TIC Turbo Instrument Controller
# Backing Pump
# Pete Owens 15/2/2017
#
# substitutions:
# device  - device name
# port    - asyn port
#
################################################################################
# STA - Backing Pump status
#
record(mbbi, "$(P)BACKING:STA")
{
    field(DESC, "Backing pump status")
    field(DTYP, "stream")
    field(INP,  "@edwardsTic.proto get_b_sta($(P)BACKING:STA:) $(PORT)")
    field(SCAN, "1 second")
    field(ZRST, "Off")
    field(ONST, "Going On")
    field(TWST, "Going Off (Normal)")
    field(THST, "Going Off (Shutdown)")
    field(FRST, "On")
}
record(longin, "$(P)BACKING:STA:ALERT")
{
    field(HIGH, "1")
    field(LOW,  "-1")
    field(HIHI, "48")
    field(LOLO, "-1")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(HHSV, "MAJOR")
    field(LLSV, "MAJOR")
}
record(mbbi, "$(P)BACKING:STA:PRI")
{
    field(ZRST, "OK")
    field(ONST, "Warning")
    field(ONSV, "MINOR")
    field(TWST, "Alarm")
    field(TWSV, "MINOR")
    field(THST, "Alarm")
    field(THSV, "MAJOR")
}
################################################################################
# START - Start Backing Pump
#
record(bo, "$(P)BACKING:START")
{
    field(DESC, "Start backing pump")
    field(DTYP, "stream")
    field(OUT,  "@edwardsTic.proto start_b $(PORT)")
    field(ZNAM, "Off")
    field(ONAM, "On")
}
################################################################################
# SPEED - Backing Pump Speed
#
record(ai, "$(P)BACKING:SPEED")
{
    field(DESC, "Backing pump speed")
    field(DTYP, "stream")
    field(INP,  "@edwardsTic.proto get_b_speed($(P)BACKING:SPEED:) $(PORT)")
    field(SCAN, "1 second")
    field(EGU,  "%")
    field(PREC, "1")
    field(LOPR, "0.0")
    field(HOPR, "100.0")
    field(HIGH, "100.1")
    field(LOW,  "0.0")
    field(HIHI, "100.1")
    field(LOLO, "-0.1")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(HHSV, "MAJOR")
    field(LLSV, "MAJOR")
}
record(longin, "$(P)BACKING:SPEED:ALERT")
{
    field(HIGH, "1")
    field(LOW,  "-1")
    field(HIHI, "48")
    field(LOLO, "-1")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(HHSV, "MAJOR")
    field(LLSV, "MAJOR")
}
record(mbbi, "$(P)BACKING:SPEED:PRI")
{
    field(ZRST, "OK")
    field(ONST, "Warning")
    field(ONSV, "MINOR")
    field(TWST, "Alarm")
    field(TWSV, "MINOR")
    field(THST, "Alarm")
    field(THSV, "MAJOR")
}
################################################################################
# SPEED - Backing Pump Power
#
record(ai, "$(P)BACKING:POWER")
{
    field(DESC, "Backing pump power")
    field(DTYP, "stream")
    field(INP,  "@edwardsTic.proto get_b_power($(P)BACKING:POWER:) $(PORT)")
    field(SCAN, "1 second")
    field(EGU,  "W")
    field(PREC, "1")
    field(LOPR, "0.0")
    field(HOPR, "50.0")
    field(HIGH, "50.0")
    field(LOW,  "0.0")
    field(HIHI, "50.1")
    field(LOLO, "-0.1")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(HHSV, "MAJOR")
    field(LLSV, "MAJOR")
}
record(longin, "$(P)BACKING:POWER:ALERT")
{
    field(HIGH, "1")
    field(LOW,  "-1")
    field(HIHI, "48")
    field(LOLO, "-1")
    field(HSV,  "MINOR")
    field(LSV,  "MINOR")
    field(HHSV, "MAJOR")
    field(LLSV, "MAJOR")
}
record(mbbi, "$(P)BACKING:POWER:PRI")
{
    field(ZRST, "OK")
    field(ONST, "Warning") field(ONSV, "MINOR")
    field(TWST, "Alarm")   field(TWSV, "MINOR")
    field(THST, "Alarm")   field(THSV, "MAJOR")
}
################################################################################
